@{
    Layout = null;
}
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ’• Lá»i Nháº¯n Äáº·c Biá»‡t - My Princess</title>
    <link rel="stylesheet" href="~/css/home.css" />
</head>
<body>
    <!-- Particle System -->
    <div class="particles" id="particles"></div>

    <!-- Floating 3D Hearts -->
    <div class="heart-3d" style="top: 10%; left: 10%; animation-delay: 0s;">ğŸ’–</div>
    <div class="heart-3d" style="top: 20%; right: 15%; animation-delay: 2s;">ğŸ’•</div>
    <div class="heart-3d" style="bottom: 30%; left: 20%; animation-delay: 4s;">ğŸ’—</div>
    <div class="heart-3d" style="bottom: 20%; right: 10%; animation-delay: 1s;">ğŸ’</div>
    <div class="heart-3d" style="top: 50%; left: 5%; animation-delay: 3s;">â¤ï¸</div>
    <div class="heart-3d" style="top: 60%; right: 5%; animation-delay: 5s;">ğŸ’</div>

    <div class="container">
        <!-- Navigation -->
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showPage('home')">ğŸ  Trang Chá»§</button>
            <button class="nav-tab" onclick="showPage('birthday')">ğŸ‰ Sá»± Kiá»‡n</button>
            <button class="nav-tab" onclick="showPage('love')">ğŸ’• TÃ¬nh YÃªu</button>
            <button class="nav-tab" onclick="showPage('memories')">ğŸ“¸ Ká»· Niá»‡m</button>
            <button class="nav-tab" onclick="showPage('music')">ğŸµ Ã‚m Nháº¡c</button>
        </div>

        <div class="card">
            <!-- Home Page -->
            <div class="page-content active" id="home">
                <h1 class="title">ğŸ’• Cáº·p ÄÃ´i Äáº·c Biá»‡t</h1>

                <div class="home-photos">
                    <div class="photos-grid">
                        @if (ViewBag.Photos != null)
                        {
                            foreach (GoodLuck.Models.Photo p in ViewBag.Photos)
                            {
                                <div class="photo-item" style="text-align:center;margin:10px;">
                                    <img src="~/uploads/@p.FileName" alt="@p.Title" style="max-width:100%;height:auto;" />
                                    <div style="color:white;">@p.Title</div>
                                </div>
                            }
                        }
                    </div>

                    <form asp-action="UploadPhotos" method="post" enctype="multipart/form-data" style="margin-top:10px;">
                        <div>
                            <input type="file" name="files" accept="image/*" />
                            <input type="text" name="titles" placeholder="TÃªn áº£nh" />
                        </div>
                        <div>
                            <input type="file" name="files" accept="image/*" />
                            <input type="text" name="titles" placeholder="TÃªn áº£nh" />
                        </div>
                        <button type="submit">Táº£i lÃªn</button>
                    </form>
                </div>
                <button class="main-button" onclick="showSpecialMessage()">
                    ğŸ’– Chá»‰nh Sá»­a
                </button>
            </div>
            

            <!-- Birthday Page -->
            <div class="page-content" id="birthday">
                <div id="birthdayMessage" style="display: none;">
                    <h1 class="title">ğŸ‰ @ViewBag.NextAnniversary?.Title</h1>
                    <p class="subtitle">@ViewBag.NextAnniversary?.Message ?? "CÃ´ng chÃºa cá»§a anh..."</p>

                    <div class="cake-container">
                        <div class="cake">ğŸ‚</div>
                    </div>
                </div>

                @if (ViewBag.NextAnniversary != null)
                {
                    <div class="countdown">
                        CÃ²n láº¡i <span id="countdown"></span> ná»¯a Ä‘áº¿n sá»± kiá»‡n "@ViewBag.NextAnniversary.Title"
                    </div>
                    @if (ViewBag.NextLetter != null)
                    {
                        <div class="special-message" id="eventLetter">
                            <button class="close-btn" onclick="hideEventLetter()">Ã—</button>
                            <div class="message-text">
                                @Html.Raw(((GoodLuck.Models.Letter)ViewBag.NextLetter).Content.Replace("\n", "<br>"))
                            </div>
                        </div>
                    }
                }

                <div class="message">
                   
                </div>

                <div class="button-group">
                    <a asp-action="Calendar" asp-controller="Home" class="button">ğŸ—“ï¸ Lá»‹ch</a>
                </div>
            </div>

            <!-- Love Page -->
            <div class="page-content" id="love">
                <h1 class="title">ğŸ’• TÃ¬nh YÃªu Cá»§a ChÃºng Ta</h1>
                <p class="subtitle">MÃ£i mÃ£i bÃªn nhau...</p>
                
                <div class="message">
                    TÃ¬nh yÃªu cá»§a chÃºng ta nhÆ° nhá»¯ng vÃ¬ sao,<br>
                    Chiáº¿u sÃ¡ng cáº£ báº§u trá»i Ä‘Ãªm.<br>
                    Em lÃ  táº¥t cáº£ nhá»¯ng gÃ¬ anh cáº§n,<br>
                    LÃ  lÃ½ do anh muá»‘n trá»Ÿ thÃ nh phiÃªn báº£n tá»‘t nháº¥t cá»§a mÃ¬nh.<br><br>
                    Anh há»©a sáº½ yÃªu em mÃ£i mÃ£i,<br>
                    DÃ¹ cÃ³ khÃ³ khÄƒn gÃ¬, anh váº«n á»Ÿ bÃªn em! ğŸ’
                </div>

                <div class="button-group">
                    <button class="button" onclick="showLoveMessage()">ğŸ’Œ ThÆ° TÃ¬nh</button>
                    <button class="button" onclick="createRomanticEffect()">ğŸŒ¹ LÃ£ng Máº¡n</button>
                    <button class="button" onclick="showPromise()">ğŸ’ Lá»i Há»©a</button>
                </div>

                <div class="special-message" id="loveMessage" style="display: none;">
                    <button class="close-btn" onclick="hideLoveMessage()">Ã—</button>
                    <div class="message-text">
                        ğŸ’Œ ThÆ° tÃ¬nh dÃ nh cho em:<br><br>
                        Em yÃªu, má»—i ngÃ y trÃ´i qua, anh cÃ ng yÃªu em nhiá»u hÆ¡n.<br>
                        Em lÃ  Ã¡nh sÃ¡ng trong cuá»™c Ä‘á»i anh,<br>
                        LÃ  lÃ½ do anh tá»‰nh dáº­y má»—i sÃ¡ng vá»›i ná»¥ cÆ°á»i.<br><br>
                        Anh yÃªu em khÃ´ng chá»‰ vÃ¬ em xinh Ä‘áº¹p,<br>
                        MÃ  vÃ¬ trÃ¡i tim em tá»‘t bá»¥ng vÃ  tÃ¢m há»“n em trong sÃ¡ng.<br><br>
                        MÃ£i yÃªu em! ğŸ’•
                    </div>
                </div>
            </div>

            <!-- Memories Page -->
            <div class="page-content" id="memories">
                <h1 class="title">ğŸ“¸ Ká»· Niá»‡m Äáº¹p</h1>
                <p class="subtitle">Nhá»¯ng khoáº£nh kháº¯c tuyá»‡t vá»i...</p>
                
                <div class="photo-gallery" style="display: grid;">
                    <div class="photo-frame">
                        <div class="photo-placeholder">ğŸ“·</div>
                        <p style="color: white;">Ká»· niá»‡m Ä‘áº§u tiÃªn</p>
                    </div>
                    <div class="photo-frame">
                        <div class="photo-placeholder">ğŸ’‘</div>
                        <p style="color: white;">TÃ¬nh yÃªu ngá»t ngÃ o</p>
                    </div>
                    <div class="photo-frame">
                        <div class="photo-placeholder">ğŸŒ¹</div>
                        <p style="color: white;">Hoa há»“ng cho em</p>
                    </div>
                </div>
            </div>

            <!-- Music Page -->
            <div class="page-content" id="music">
                <h1 class="title">ğŸµ Giai Äiá»‡u YÃªu ThÃ­ch</h1>
                <p class="subtitle">Ã‚m nháº¡c dÃ nh cho em...</p>
                
                <div class="music-player">
                    <button class="play-button" onclick="togglePlay(this)">â–¶</button>
                </div>
            </div>
        </div>
    </div>

<script>
function showPage(page) {
    document.querySelectorAll('.nav-tab').forEach(tab => tab.classList.remove('active'));
    document.querySelectorAll('.page-content').forEach(p => p.classList.remove('active'));
    document.querySelector(`[onclick="showPage('${page}')"]`).classList.add('active');
    document.getElementById(page).classList.add('active');
}

function showSpecialMessage() {
    document.getElementById('specialMessage').style.display = 'block';
}
function hideSpecialMessage() {
    document.getElementById('specialMessage').style.display = 'none';
}

function showLoveMessage() {
    document.getElementById('loveMessage').style.display = 'block';
}
function hideLoveMessage() {
    document.getElementById('loveMessage').style.display = 'none';
}

function showEventLetter() {
    const el = document.getElementById('eventLetter');
    if (el) el.style.display = 'block';
}
function hideEventLetter() {
    const el = document.getElementById('eventLetter');
    if (el) el.style.display = 'none';
}

function createFireworks() {
    // placeholder for fireworks effect
}
function createHeartExplosion() {
    // placeholder for heart explosion effect
}
function createConfetti() {
    // placeholder for confetti effect
}
function createRomanticEffect() {
    // placeholder for romantic effect
}
function showPromise() {
    alert('Anh há»©a sáº½ mÃ£i bÃªn em!');
}
function togglePlay(btn) {
    if (btn.textContent === 'â–¶') {
        btn.textContent = 'âšâš';
    } else {
        btn.textContent = 'â–¶';
    }
}

function startCountdown(dateString) {
    const target = new Date(dateString);
    const span = document.getElementById('countdown');
    const countdownDiv = span ? span.parentElement : null;
    const letterDiv = document.getElementById('eventLetter');
    const messageDiv = document.getElementById('birthdayMessage');
    if (!span) return;

    function update() {
        const now = new Date();
        let diff = target - now;
        const endOfDay = new Date(target.getTime() + 24 * 60 * 60 * 1000);
        if (now >= target && now < endOfDay) {
            if (letterDiv) letterDiv.style.display = 'block';
            if (messageDiv) messageDiv.style.display = 'block';
        } else {
            if (letterDiv) letterDiv.style.display = 'none';
            if (messageDiv) messageDiv.style.display = 'none';
        }
        if (diff <= 0) {
            diff = 0;
            if (countdownDiv) countdownDiv.style.display = 'none';
        } else if (countdownDiv) {
            countdownDiv.style.display = 'block';
        }

        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        diff -= days * 1000 * 60 * 60 * 24;
        const hours = Math.floor(diff / (1000 * 60 * 60));
        diff -= hours * 1000 * 60 * 60;
        const minutes = Math.floor(diff / (1000 * 60));
        diff -= minutes * 1000 * 60;
        const seconds = Math.floor(diff / 1000);

        span.textContent = `${days}d ${hours}h ${minutes}m ${seconds}s`;
    }

    update();
    setInterval(update, 1000);
}

@if (ViewBag.NextAnniversary != null)
{
    <text>
        startCountdown('@(((DateTime)ViewBag.NextAnniversary.Date).ToString("o"))');
    </text>
}
</script>
</body>
</html>
